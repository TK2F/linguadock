# LinguaDock ユーザーガイド

## 目次
1. [インストール](#インストール)
2. [はじめての起動](#はじめての起動)
3. [クイズモード](#クイズモード)
4. [データセット管理](#データセット管理)
5. [設定](#設定)
6. [キーボードショートカット](#キーボードショートカット)

---

## インストール

### 開発者モードでのインストール

1. **ソースコードをダウンロード**
   ```bash
   git clone https://github.com/tk2f/linguadock.git
   cd linguadock
   npm install
   npm run build
   ```

2. **Chrome拡張機能として読み込み**
   - Chromeで `chrome://extensions` を開く
   - 右上の「デベロッパーモード」をON
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - `dist` フォルダを選択

3. **サイドパネルを開く**
   - 任意のページで右クリック → サイドパネルを開く
   - または拡張機能アイコンをクリック

---

## はじめての起動

初回起動時にウェルカムポップアップが表示されます。

**同梱データセット（8言語）**:
- 🇵🇱 ポーランド語入門 (250語)
- 🇬🇧 英語入門 (250語)
- 🇩🇪 ドイツ語入門 (250語)
- 🇫🇷 フランス語入門 (250語)
- 🇪🇸 スペイン語入門 (250語)
- 🇮🇩 インドネシア語入門 (250語)
- 🇰🇷 韓国語入門 (250語)
- 🇨🇳 中国語入門 (250語)

初回はポーランド語と英語が自動でロードされます。

---

## クイズモード

| モード | 説明 |
|--------|------|
| 🎯 **2択問題** | 日本語の意味に対応する単語を2つから選ぶ |
| ⭕ **正誤判定** | 表示されたペアが正しいか判定 |
| ✏️ **穴埋め** | 空欄に入る文字を入力 |

---

## データセット管理

**設定（⚙️）→ データセット管理**

### できること
- ✅ データセットのロード/アンロード
- 🔒 ロック（削除・アンロード防止）
- 🗑️ ユーザーCSVの削除
- 📥 CSVインポート
- 📤 CSVエクスポート

### 制約
- 同梱CSVは削除不可（アンロードは可能）
- ロック中のデータセットはアンロード・削除不可

---

## 設定

### TTS（テキスト読み上げ）
- **エンジン**: Chrome TTS / Web Speech API
- **速度**: 0.5〜2.0
- **ピッチ**: 0.5〜2.0

### タイマー
- 制限時間を設定可能（1〜60秒）

### ダークモード
- システム設定に連動 / 手動切替

---

## キーボードショートカット

| キー | アクション |
|------|----------|
| `1` / `A` / `←` | 選択肢A |
| `2` / `B` / `→` | 選択肢B |
| `O` | 正解（正誤モード） |
| `X` | 不正解（正誤モード） |
| `Enter` / `Space` | 次の問題 |

---

## トラブルシューティング

### 🔍 デバッグモードの使い方

問題が起きた時はデバッグモードで詳細情報を確認できます。

1. **設定（⚙️）を開く**
2. **下部の「🔧 開発者向け」セクション**
3. **「デバッグモード」をON**
4. サイドパネル内で**右クリック → 「検証」**
5. **Console タブ**でログを確認

出力されるログ:
- `[App]` - 初期化、データセット読込
- `[TTS]` - 音声合成
- `[CSV]` - CSVパース

---

### ❌ 語数が正しく表示されない

**解決方法**:
1. 設定 → 「🗑️ すべてのデータを初期化」
2. 拡張機能をリロード（`chrome://extensions` → ⟳）

---

### ❌ 音声（TTS）が再生されない

**解決方法**:
1. 設定 → 音声エンジンを切り替え（Chrome TTS ↔ Web Speech）
2. ブラウザを再起動
3. システムの音声設定を確認

---

### ❌ CSVインポートでエラー

**チェックリスト**:
- [ ] UTF-8エンコーディング
- [ ] ヘッダー行がある
- [ ] 必須列: `id, lang, text, reading_kana, meaning_ja`
- [ ] 改行コードが統一されている

---

### ❌ 拡張機能が更新されない

**解決方法**:
1. `chrome://extensions` を開く
2. LinguaDockの**更新ボタン（⟳）**をクリック
3. サイドパネルを閉じて再度開く

---

### ❌ すべてをリセットしたい

**方法1**: 設定 → 「🗑️ すべてのデータを初期化」

**方法2**: 拡張機能を削除して再インストール

---

## 困ったときは

1. **デバッグモードをON**にしてログを確認
2. **初期化**してみる
3. **拡張機能をリロード**する
4. **GitHubのIssues**で報告: [Issues](https://github.com/tk2f/linguadock/issues)

